package com.example.come_on;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.text.DateFormat;
import java.util.Calendar;
import java.util.Date;
import java.text.*;

import com.example.come_on.file.FileService;

import android.support.v7.app.ActionBarActivity;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.res.AssetManager;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ExpandableListView.OnChildClickListener;
import android.widget.ImageButton;
import android.widget.TextView;
import android.widget.Toast;


public class MainActivity extends Activity {
	private Button button,begin;
	private TextView textView1,textView2;
	private ImageButton imageButton;
	private SharedPreferences sp;
	MediaPlayer mp2 = null;
	private int countDay;
	private FileService service = null;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        button  = (Button)this.findViewById(R.id.button1);
        begin = (Button)this.findViewById(R.id.button2);
        imageButton = (ImageButton)this.findViewById(R.id.imageButton1);
        textView1 = (TextView)this.findViewById(R.id.textView3);
        textView2 = (TextView)this.findViewById(R.id.textView2);
        mp2 = MediaPlayer.create(this, R.raw.yuzumusic);
        sp = getSharedPreferences("userInfo", 0);
        String name =sp.getString("USER_NAME", "");
        boolean remember = sp.getBoolean("remember", false);
        if(remember){
        	textView2.setText(name);
        	textView1.setText("ª∂”≠ªÿ¿¥");
        }
        button.setOnClickListener(new OnClickListener() {
			
			@Override
			public void onClick(View v) {
				// TODO Auto-generated method stub
				Intent intent = new Intent(MainActivity.this,
						InformationUp.class);
				startActivity(intent);
			}
		});
        
        imageButton.setOnClickListener(new OnClickListener() {
			
			@Override
			public void onClick(View v) {
				mp2.start();
       
			}
		});
        
        begin.setOnClickListener(new  OnClickListener() {
			
			@Override
			public void onClick(View arg0) {
				Intent intent = new Intent(MainActivity.this, ChoiceActivity.class);
				startActivity(intent);					
				
			}
		});
        
        service = new FileService(this);
        String previousTime = "";
        Date date = new Date();
        long pT = date.getTime();
        previousTime = Long.toString(pT);
        Toast.makeText(MainActivity.this, "ddd", 1).show();
//        if((previousTime=service.readContentFromFile("time.txt"))==null) {
//        	Date date = new Date();
//    		long nowTime = date.getTime();
//    		String nowT = Long.toString(nowTime);
//    		boolean flag = service.saveContentToFile("time.txt",Context.MODE_PRIVATE,nowT.getBytes());
//    		countDay =1;
//    		Toast.makeText(MainActivity.this, "lalal", 1).show();
//        }
        
//        else{
//        	
//    		Date date = new Date();
//    		long presentTime = date.getTime();
//    		long previousT = Long.parseLong(previousTime);
//    		long between_days=(presentTime-previousT)/(1000*3600*24);
//    		countDay =  Integer.parseInt(String.valueOf(between_days));
//    		String countD = String.valueOf(countDay);
//    		Toast.makeText(MainActivity.this, countD, 1).show();
//    		
//        }
        
    }
    public int getCountDay(){
    	return countDay;
    }
       
}



 